"use strict";(self["webpackChunkhexschool_project_frontend"]=self["webpackChunkhexschool_project_frontend"]||[]).push([[401],{1621:function(e,o,t){t.d(o,{Z:function(){return d}});var n=t(6252);const a=e=>((0,n.dD)("data-v-0e334606"),e=e(),(0,n.Cn)(),e),s={class:"bg-secondary mt-5 mb-miner-5 bottom-0 w-100"},c=a((()=>(0,n._)("p",{class:"text-center text-white p-1 mb-0"},"資料來源﹔交通部 TDX 運輸資料流通服務",-1))),r=[c];function i(e,o,t,a,c,i){return(0,n.wg)(),(0,n.iD)("footer",s,r)}var l={},h=t(3744);const u=(0,h.Z)(l,[["render",i],["__scopeId","data-v-0e334606"]]);var d=u},3401:function(e,o,t){t.r(o),t.d(o,{default:function(){return f}});var n=t(6252);const a={class:"navbar navbar-expand-lg navbar-dark bg-dark"},s={class:"container-fluid"},c=(0,n._)("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},[(0,n._)("span",{class:"navbar-toggler-icon"})],-1),r={class:"collapse navbar-collapse",id:"navbarNav"},i={class:"navbar-nav"},l={class:"nav-item"},h={class:"nav-item"},u={class:"nav-item"},d={class:"container mt-5"};function k(e,o,t,k,p,v){const m=(0,n.up)("router-link"),g=(0,n.up)("router-view"),f=(0,n.up)("FrontFooter");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("nav",a,[(0,n._)("div",s,[(0,n.Wm)(m,{to:"/admin",class:"navbar-brand",href:"#"},{default:(0,n.w5)((()=>[(0,n.Uk)("後台")])),_:1}),c,(0,n._)("div",r,[(0,n._)("ul",i,[(0,n._)("li",l,[(0,n.Wm)(m,{to:"/admin",class:"nav-link active","aria-current":"page"},{default:(0,n.w5)((()=>[(0,n.Uk)("後台景點列表")])),_:1})]),(0,n._)("li",h,[(0,n.Wm)(m,{to:"/",class:"nav-link",href:"#"},{default:(0,n.w5)((()=>[(0,n.Uk)("回到前台")])),_:1})]),(0,n._)("li",u,[(0,n._)("a",{class:"nav-link",href:"#",onClick:o[0]||(o[0]=(...e)=>v.signOut&&v.signOut(...e))},"登出")])])])])]),(0,n._)("div",d,[(0,n.Wm)(g)]),(0,n.Wm)(f)],64)}t(7658);var p=t(1621),v={components:{FrontFooter:p.Z},data(){return{checkSuccess:!1}},methods:{checkLogin(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)accessToken\s*=\s*([^;]*).*$)|^.*$/,"$1");if(e){this.$http.defaults.headers.common.Authorization=`Bearer ${e}`;const o="https://tourist-spots-backend.onrender.com/api/check-login";this.$http.post(o).then((e=>{console.log(e),this.checkSuccess=!0})).catch((e=>{console.log(e),"Token has expired"===e.response.data.msg&&(console.log("過期"),this.refreshToken())}))}else alert("尚未登入"),this.$router.push("/login")},refreshToken(){const e=document.cookie.replace(/(?:(?:^|.*;\s*)refreshToken\s*=\s*([^;]*).*$)|^.*$/,"$1");this.$http.defaults.headers.common.Authorization=`Bearer ${e}`;const o="https://tourist-spots-backend.onrender.com/api/refresh";this.$http.post(o).then((o=>{console.log(o),document.cookie=`accessToken=${o.data.access_token}`,document.cookie=`refreshToken=${e}`,console.log(document.cookie),this.checkLogin()})).catch((e=>{console.log(e)}))},signOut(){document.cookie="accessToken=;refreshToken=;",document.cookie="refreshToken=;",this.notSavedAccessToken=!0,this.$router.push("/")}},mounted(){this.checkLogin()}},m=t(3744);const g=(0,m.Z)(v,[["render",k]]);var f=g}}]);
//# sourceMappingURL=401.10c5c0b6.js.map