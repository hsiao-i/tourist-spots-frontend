{"version":3,"file":"js/345.aa1dd7cb.js","mappings":"iOAEOA,MAAM,uB,GACTC,EAAAA,EAAAA,GAAW,UAAP,MAAE,G,GAECD,MAAM,Q,GACFE,IAAI,aAAaF,MAAM,oB,GAK3BA,MAAM,Q,GACFE,IAAI,gBAAgBF,MAAM,oB,GAMnCC,EAAAA,EAAAA,GAEM,aADJA,EAAAA,EAAAA,GAA+D,UAAvDE,KAAK,SAASH,MAAM,yBAAwB,QAAE,G,8FAlB5DI,EAAAA,EAAAA,IAAeC,IACfJ,EAAAA,EAAAA,GAoBM,MApBNK,EAoBM,CAnBJC,GACAN,EAAAA,EAAAA,GAiBO,QAjBAO,SAAM,8BAAUC,EAAAA,QAAAA,EAAAA,UAAAA,IAAM,e,EAC3BR,EAAAA,EAAAA,GAKM,MALNS,EAKM,EAJJT,EAAAA,EAAAA,GAGQ,QAHRU,EAGQ,UAHyC,SAE/C,gBAAsG,SAA/FR,KAAK,QAAQS,GAAG,aAAaC,KAAK,aAAab,MAAM,e,qCAAwBc,EAAAA,KAAKC,UAAS,I,iBAAdD,EAAAA,KAAKC,kBAG7Fd,EAAAA,EAAAA,GAKM,MALNe,EAKM,EAJJf,EAAAA,EAAAA,GAGQ,QAHRgB,EAGQ,UAH4C,SAElD,gBAA8G,SAAvGd,KAAK,WAAWS,GAAG,gBAAgBC,KAAK,gBAAgBb,MAAM,e,qCAAwBc,EAAAA,KAAKI,SAAQ,I,iBAAbJ,EAAAA,KAAKI,gBAItGC,GAEM,U,uBAQZ,GACEC,WAAY,CACVC,YAAWA,EAAAA,GAEbC,OACE,MAAO,CACLC,KAAM,CACJR,UAAW,GACXG,SAAU,IAIhB,EACAM,QAAS,CACPC,SACE,MAAMC,EAAO,uDACbC,KAAKC,MACFC,KAAKH,EAAKC,KAAKJ,KAAM,CACpBO,QAAS,CACP,eAAgB,sBAGnBC,MAAMC,IACLC,QAAQC,IAAIF,GACZ,MAAMG,EAAcH,EAAIV,KAAKc,QAAQC,aAC/BC,EAAeN,EAAIV,KAAKc,QAAQG,cAEV,mBAAxBZ,KAAKJ,KAAKR,WACZyB,SAASC,OAAU,eAAcN,IACjCK,SAASC,OAAU,gBAAeH,IAElCX,KAAKe,QAAQC,KAAK,CAAEC,KAAM,WAC1BC,MAAM,YAENA,MAAM,QACNL,SAASC,OAAU,eAAcN,IACjCK,SAASC,OAAU,gBAAeH,IAClCX,KAAKe,QAAQC,KAAK,KACpB,IAEDG,OAAOC,IACNd,QAAQC,IAAIa,GAC2B,MAAnCA,EAAIC,SAAS1B,KAAK2B,MAAMC,QAC1BL,MAAME,EAAIC,SAAS1B,KAAK2B,MAAMA,MAChC,GAEN,GAEFE,UACEX,SAASC,OAAS,6BACpB,G,UCzEF,MAAMW,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE,O","sources":["webpack://hexschool-project-frontend/./src/views/LoginPage.vue","webpack://hexschool-project-frontend/./src/views/LoginPage.vue?fce3"],"sourcesContent":["<template>\n  <FrontNavbar />\n  <div class=\"container mt-5 w-50\">\n    <h2>登入</h2>\n    <form @submit.prevent=\"signIn\">\n      <div class=\"mb-3\">\n        <label for=\"loginEmail\" class=\"form-label w-100\">\n          帳號\n          <input type=\"email\" id=\"loginEmail\" name=\"loginEmail\" class=\"form-control\" v-model=\"user.useremail\" />\n        </label>\n      </div>\n      <div class=\"mb-3\">\n        <label for=\"loginPassword\" class=\"form-label w-100\">\n          密碼\n          <input type=\"password\" id=\"loginPassword\" name=\"loginPassword\" class=\"form-control\" v-model=\"user.password\" />\n        </label>\n      </div>\n\n      <div>\n        <button type=\"submit\" class=\"btn btn-primary w-100\">登入</button>\n      </div>\n    </form>\n  </div>\n</template>\n\n<script>\nimport FrontNavbar from '@/components/FrontNavbar.vue';\n\nexport default {\n  components: {\n    FrontNavbar,\n  },\n  data() {\n    return {\n      user: {\n        useremail: '',\n        password: '',\n      },\n      // loginEmail: '',\n    };\n  },\n  methods: {\n    signIn() {\n      const url = `${process.env.VUE_APP_API}/api/login`;\n      this.$http\n        .post(url, this.user, {\n          headers: {\n            'Content-Type': 'application/json',\n          },\n        })\n        .then((res) => {\n          console.log(res);\n          const accessToken = res.data.success.access_token;\n          const refreshToken = res.data.success.refresh_token;\n\n          if (this.user.useremail === 'test1@mail.com') {\n            document.cookie = `accessToken=${accessToken}`;\n            document.cookie = `refreshToken=${refreshToken}`;\n\n            this.$router.push({ path: '/admin' });\n            alert('成功登入後台');\n          } else {\n            alert('成功登入');\n            document.cookie = `accessToken=${accessToken}`;\n            document.cookie = `refreshToken=${refreshToken}`;\n            this.$router.push('/');\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n          if (err.response.data.error.status === 401) {\n            alert(err.response.data.error.error);\n          }\n        });\n    },\n  },\n  mounted() {\n    document.cookie = 'accessToken=;refreshToken=;';\n  },\n};\n</script>\n\n<style></style>\n","import { render } from \"./LoginPage.vue?vue&type=template&id=043ea608\"\nimport script from \"./LoginPage.vue?vue&type=script&lang=js\"\nexport * from \"./LoginPage.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\eva090029\\\\practice\\\\separate\\\\hexschool\\\\tourist-spots-frontend-main\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","for","type","_createVNode","_component_FrontNavbar","_hoisted_1","_hoisted_2","onSubmit","$options","_hoisted_3","_hoisted_4","id","name","$data","useremail","_hoisted_5","_hoisted_6","password","_hoisted_7","components","FrontNavbar","data","user","methods","signIn","url","this","$http","post","headers","then","res","console","log","accessToken","success","access_token","refreshToken","refresh_token","document","cookie","$router","push","path","alert","catch","err","response","error","status","mounted","__exports__","render"],"sourceRoot":""}