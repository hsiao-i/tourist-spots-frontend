"use strict";(self["webpackChunkhexschool_project_frontend"]=self["webpackChunkhexschool_project_frontend"]||[]).push([[345],{1345:function(e,s,o){o.r(s),o.d(s,{default:function(){return _}});var n=o(6252),r=o(9963);const t={class:"container mt-5 w-50"},a=(0,n._)("h2",null,"登入",-1),l={class:"mb-3"},c={for:"loginEmail",class:"form-label w-100"},i={class:"mb-3"},u={for:"loginPassword",class:"form-label w-100"},d=(0,n._)("div",null,[(0,n._)("button",{type:"submit",class:"btn btn-primary w-100"},"登入")],-1);function m(e,s,o,m,p,h){const k=(0,n.up)("FrontNavbar");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(k),(0,n._)("div",t,[a,(0,n._)("form",{onSubmit:s[2]||(s[2]=(0,r.iM)(((...e)=>h.signIn&&h.signIn(...e)),["prevent"]))},[(0,n._)("div",l,[(0,n._)("label",c,[(0,n.Uk)(" 帳號 "),(0,n.wy)((0,n._)("input",{type:"email",id:"loginEmail",name:"loginEmail",class:"form-control","onUpdate:modelValue":s[0]||(s[0]=e=>p.user.useremail=e)},null,512),[[r.nr,p.user.useremail]])])]),(0,n._)("div",i,[(0,n._)("label",u,[(0,n.Uk)(" 密碼 "),(0,n.wy)((0,n._)("input",{type:"password",id:"loginPassword",name:"loginPassword",class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>p.user.password=e)},null,512),[[r.nr,p.user.password]])])]),d],32)])],64)}o(7658);var p=o(7077),h={components:{FrontNavbar:p.Z},data(){return{user:{useremail:"",password:""}}},methods:{signIn(){const e="https://tourist-spots-backend.onrender.com/api/login";this.$http.post(e,this.user,{headers:{"Content-Type":"application/json"}}).then((e=>{console.log(e);const s=e.data.success.access_token,o=e.data.success.refresh_token;"test1@mail.com"===this.user.useremail?(document.cookie=`accessToken=${s}`,document.cookie=`refreshToken=${o}`,this.$router.push({path:"/admin"}),alert("成功登入後台")):(alert("成功登入"),document.cookie=`accessToken=${s}`,document.cookie=`refreshToken=${o}`,this.$router.push("/"))})).catch((e=>{console.log(e),401===e.response.data.error.status&&alert(e.response.data.error.error)}))}},mounted(){document.cookie="accessToken=;refreshToken=;"}},k=o(3744);const f=(0,k.Z)(h,[["render",m]]);var _=f}}]);
//# sourceMappingURL=345.aa1dd7cb.js.map