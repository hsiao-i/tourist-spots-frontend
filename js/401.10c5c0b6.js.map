{"version":3,"file":"js/401.10c5c0b6.js","mappings":"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","sources":["webpack://hexschool-project-frontend/./src/components/FrontFooter.vue","webpack://hexschool-project-frontend/./src/components/FrontFooter.vue?eefe","webpack://hexschool-project-frontend/./src/views/admin/DashboardView.vue","webpack://hexschool-project-frontend/./src/views/admin/DashboardView.vue?fec8"],"sourcesContent":["<template>\n  <footer class=\"bg-secondary mt-5 mb-miner-5 bottom-0 w-100\">\n    <p class=\"text-center text-white p-1 mb-0\">資料來源﹔交通部 TDX 運輸資料流通服務</p>\n  </footer>\n</template>\n\n<script>\nexport default {};\n</script>\n\n<style lang=\"scss\" scoped>\n.mb-miner-5 {\n  margin-bottom: -24px;\n}\n</style>\n","import { render } from \"./FrontFooter.vue?vue&type=template&id=0e334606&scoped=true\"\nimport script from \"./FrontFooter.vue?vue&type=script&lang=js\"\nexport * from \"./FrontFooter.vue?vue&type=script&lang=js\"\n\nimport \"./FrontFooter.vue?vue&type=style&index=0&id=0e334606&lang=scss&scoped=true\"\n\nimport exportComponent from \"D:\\\\eva090029\\\\practice\\\\separate\\\\hexschool\\\\tourist-spots-frontend-main\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-0e334606\"]])\n\nexport default __exports__","<template>\n  <nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\n    <div class=\"container-fluid\">\n      <router-link to=\"/admin\" class=\"navbar-brand\" href=\"#\">後台</router-link>\n      <button class=\"navbar-toggler\" type=\"button\" data-bs-toggle=\"collapse\" data-bs-target=\"#navbarNav\" aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\n        <span class=\"navbar-toggler-icon\"></span>\n      </button>\n      <div class=\"collapse navbar-collapse\" id=\"navbarNav\">\n        <ul class=\"navbar-nav\">\n          <li class=\"nav-item\">\n            <router-link to=\"/admin\" class=\"nav-link active\" aria-current=\"page\">後台景點列表</router-link>\n          </li>\n          <!-- <li class=\"nav-item\">\n            <router-link to=\"/admin/coupon\" class=\"nav-link\" href=\"#\">後台優惠券</router-link>\n          </li>\n          <li class=\"nav-item\">\n            <router-link to=\"/admin/order\" class=\"nav-link\" href=\"#\">訂單</router-link>\n          </li> -->\n          <li class=\"nav-item\">\n            <router-link to=\"/\" class=\"nav-link\" href=\"#\">回到前台</router-link>\n          </li>\n          <li class=\"nav-item\">\n            <a class=\"nav-link\" href=\"#\" @click=\"signOut\">登出</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n  </nav>\n  <div class=\"container mt-5\">\n    <router-view />\n  </div>\n  <FrontFooter />\n</template>\n\n<script>\nimport FrontFooter from '@/components/FrontFooter.vue';\n\nexport default {\n  components: {\n    FrontFooter,\n  },\n  data() {\n    return {\n      checkSuccess: false,\n    };\n  },\n  methods: {\n    checkLogin() {\n      const token = document.cookie.replace(/(?:(?:^|.*;\\s*)accessToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n\n      if (token) {\n        this.$http.defaults.headers.common.Authorization = `Bearer ${token}`;\n        const url = `${process.env.VUE_APP_API}/api/check-login`;\n        this.$http\n          .post(url)\n          .then((res) => {\n            console.log(res);\n            this.checkSuccess = true;\n          })\n          .catch((err) => {\n            console.log(err);\n            if (err.response.data.msg === 'Token has expired') {\n              console.log('過期');\n              this.refreshToken();\n            }\n            // this.$router.push('/login');\n          });\n      } else {\n        alert('尚未登入');\n        this.$router.push('/login');\n      }\n    },\n    refreshToken() {\n      const refreshToken = document.cookie.replace(/(?:(?:^|.*;\\s*)refreshToken\\s*=\\s*([^;]*).*$)|^.*$/, '$1');\n      this.$http.defaults.headers.common.Authorization = `Bearer ${refreshToken}`;\n      const refreshUrl = `${process.env.VUE_APP_API}/api/refresh`;\n\n      this.$http\n        .post(refreshUrl)\n        .then((res) => {\n          console.log(res);\n          document.cookie = `accessToken=${res.data.access_token}`;\n          document.cookie = `refreshToken=${refreshToken}`;\n          console.log(document.cookie);\n          this.checkLogin();\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    signOut() {\n      document.cookie = 'accessToken=;refreshToken=;';\n      document.cookie = 'refreshToken=;';\n      this.notSavedAccessToken = true;\n      this.$router.push('/');\n    },\n  },\n\n  mounted() {\n    this.checkLogin();\n  },\n};\n</script>\n\n<style></style>\n","import { render } from \"./DashboardView.vue?vue&type=template&id=c906438a\"\nimport script from \"./DashboardView.vue?vue&type=script&lang=js\"\nexport * from \"./DashboardView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\eva090029\\\\practice\\\\separate\\\\hexschool\\\\tourist-spots-frontend-main\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_hoisted_2","_createElementBlock","_hoisted_1","__exports__","render","type","id","_createVNode","_component_router_link","to","href","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","onClick","$options","_hoisted_9","_component_router_view","_component_FrontFooter","components","FrontFooter","data","checkSuccess","methods","checkLogin","token","document","cookie","replace","this","$http","defaults","headers","common","Authorization","url","post","then","res","console","log","catch","err","response","msg","refreshToken","alert","$router","push","refreshUrl","access_token","signOut","notSavedAccessToken","mounted"],"sourceRoot":""}