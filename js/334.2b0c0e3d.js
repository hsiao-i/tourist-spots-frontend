"use strict";(self["webpackChunkhexschool_project_frontend"]=self["webpackChunkhexschool_project_frontend"]||[]).push([[334],{7334:function(t,o,s){s.r(o),s.d(o,{default:function(){return v}});var e=s(6252),i=s(3577),n=s(9963);const l=(0,e._)("h2",null,"景點列表",-1),d={class:"table table-striped"},r=(0,e._)("thead",null,[(0,e._)("tr",null,[(0,e._)("th",{scope:"col"},"景點名稱"),(0,e._)("th",{scope:"col"},"描述"),(0,e._)("th",{scope:"col"})])],-1),p={width:"100px"},a={class:"text-end",width:"120px"},c=["onClick"],u=["onClick"],h={class:"w-50 my-5"},S=(0,e._)("h3",null,"新增編輯區塊",-1),b={class:"mb-3"},_={for:"title",class:"form-label w-100"},g={class:"mb-3"},m={for:"img",class:"form-label w-100"},T={for:"description",class:"w-100"};function k(t,o,s,k,w,f){return(0,e.wg)(),(0,e.iD)(e.HY,null,[l,(0,e._)("table",d,[r,(0,e._)("tbody",null,[((0,e.wg)(!0),(0,e.iD)(e.HY,null,(0,e.Ko)(w.touristSpots,(t=>((0,e.wg)(),(0,e.iD)("tr",{key:t.id},[(0,e._)("td",p,(0,i.zw)(t.position),1),(0,e._)("td",null,(0,i.zw)(t.description),1),(0,e._)("td",a,[(0,e._)("button",{type:"button",class:"btn btn-success btn-sm me-2",onClick:o=>f.editTouristSpot("showData",t.id)},"編輯",8,c),(0,e._)("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:o=>f.deleteTouristSpot(t.id)},"刪除",8,u)])])))),128))])]),(0,e._)("div",h,[S,(0,e._)("div",b,[(0,e._)("label",_,[(0,e.Uk)(" 景點名稱 "),(0,e.wy)((0,e._)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[0]||(o[0]=t=>w.addTouristSpot.position=t)},null,512),[[n.nr,w.addTouristSpot.position]])])]),(0,e._)("div",g,[(0,e._)("label",m,[(0,e.Uk)(" 圖片網址 "),(0,e.wy)((0,e._)("input",{type:"text",class:"form-control","onUpdate:modelValue":o[1]||(o[1]=t=>w.addTouristSpot.img_url=t)},null,512),[[n.nr,w.addTouristSpot.img_url]])])]),(0,e._)("div",null,[(0,e._)("label",T,[(0,e.Uk)(" 景點描述 "),(0,e.wy)((0,e._)("textarea",{name:"description",id:"description",class:"form-control",style:{height:"150px"},"onUpdate:modelValue":o[2]||(o[2]=t=>w.addTouristSpot.description=t)},null,512),[[n.nr,w.addTouristSpot.description]])])]),(0,e._)("div",null,[w.addOrEditStatus?((0,e.wg)(),(0,e.iD)("button",{key:0,type:"button",class:"btn btn-success",onClick:o[3]||(o[3]=(...t)=>f.addSingleTouristSpot&&f.addSingleTouristSpot(...t))},"新增")):((0,e.wg)(),(0,e.iD)("button",{key:1,type:"button",class:"btn btn-success",onClick:o[4]||(o[4]=t=>f.editTouristSpot("revise"))},"更新內容"))])])],64)}var w={data(){return{touristSpots:[],addOrEditStatus:!0,addTouristSpot:{position:"",description:"",img_url:""},tempSpot:{}}},methods:{getTouristSpots(){this.$http.get("https://tourist-spots-backend.onrender.com/api/tourist-spots").then((t=>{this.touristSpots=t.data.spots})).catch((t=>{console.log(t)}))},addSingleTouristSpot(){const t="https://tourist-spots-backend.onrender.com/api/add-tourist-spot";this.$http.post(t,this.addTouristSpot).then((t=>{this.getTouristSpots(),this.addTouristSpot={},alert("成功新增景點"),console.log(t)})).catch((t=>{console.log(t)}))},editTouristSpot(t,o){this.addOrEditStatus=!1;const s=`https://tourist-spots-backend.onrender.com/api/tourist-spot/${o}`;if("showData"===t)this.$http.get(s).then((t=>{this.tempSpot=t.data.spot,this.addTouristSpot=this.tempSpot})).catch((t=>{console.log(t)}));else if("revise"===t){const o=this.addTouristSpot.id;console.log(t,o);const s=`https://tourist-spots-backend.onrender.com/api/revise-tourist-spot/${o}`;this.$http.put(s,this.addTouristSpot).then((t=>{this.addTouristSpot={},this.addOrEditStatus=!0,this.getTouristSpots(),alert("成功更新景點資料"),console.log(t)})).catch((t=>{console.log(t)}))}},deleteTouristSpot(t){const o=`https://tourist-spots-backend.onrender.com/api/delete-tourist-spot/${t}`;this.$http.delete(o).then((t=>{console.log(t),alert("成功刪除"),this.getTouristSpots()})).catch((t=>{console.log(t)}))}},mounted(){this.getTouristSpots()}},f=s(3744);const y=(0,f.Z)(w,[["render",k]]);var v=y}}]);
//# sourceMappingURL=334.2b0c0e3d.js.map